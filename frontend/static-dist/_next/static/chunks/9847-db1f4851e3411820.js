"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9847],{69847:function(e,t,s){s.d(t,{H:function(){return o},a:function(){return c}});var r=s(57437),n=s(2265),a=s(90486);let i=(0,n.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,n.useState)(null),[c,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{try{let e=await a.Z.getCurrentUser();e.success&&e.data&&o(e.data)}catch(e){console.error("Auth check failed:",e),o(null)}finally{u(!1)}})()},[]);let l=async(e,t)=>{try{u(!0);let s=await a.Z.login(e,t);if(s.success&&s.data)return o(s.data.user),!0;return!1}catch(e){return console.error("Login failed:",e),!1}finally{u(!1)}},d=async()=>{try{await fetch("".concat("http://localhost:5000/api","/auth/logout"),{method:"POST",credentials:"include"})}catch(e){console.error("Logout request failed:",e)}o(null)};return(0,r.jsx)(i.Provider,{value:{user:s,token:null,login:l,logout:d,isLoading:c},children:t})}function c(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},90486:function(e,t,s){s.d(t,{x:function(){return n}});class r{async fetchCsrfToken(){try{let t=await fetch("".concat(this.baseUrl,"/csrf-token"),{credentials:"include"});if(t.ok){var e;let s=await t.json();return this.csrfToken=(null===(e=s.data)||void 0===e?void 0:e.csrfToken)||null,this.csrfToken}}catch(e){console.error("Failed to fetch CSRF token:",e)}return null}async getCsrfToken(){return this.csrfToken||await this.fetchCsrfToken(),this.csrfToken}async request(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(s.method||"GET","-").concat(e);if(this.requestQueue.has(r))return this.requestQueue.get(r);let n="".concat(this.baseUrl).concat(e),a={...s.headers};if(s.body instanceof FormData||(a["Content-Type"]="application/json"),["POST","PUT","DELETE","PATCH"].includes((null===(t=s.method)||void 0===t?void 0:t.toUpperCase())||"GET")){let e=await this.getCsrfToken();e&&(a["X-CSRF-Token"]=e)}let i=(async()=>{try{let t=new AbortController,r=setTimeout(()=>t.abort(),15e3),i=await fetch(n,{...s,headers:a,credentials:"include",signal:t.signal});if(clearTimeout(r),403===i.status){var e;let t=await i.json().catch(()=>({}));if(null===(e=t.message)||void 0===e?void 0:e.includes("CSRF")){await this.fetchCsrfToken();let e=this.csrfToken;if(e){a["X-CSRF-Token"]=e;let t=await fetch(n,{...s,headers:a,credentials:"include"});if(t.ok)return await t.json()}}}if(401===i.status&&await this.refreshToken()){let e=await fetch(n,{...s,headers:a,credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.message||"HTTP ".concat(e.status,": ").concat(e.statusText))}return await e.json()}if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.message||"HTTP ".concat(i.status,": ").concat(i.statusText))}return await i.json()}catch(e){if(console.error("API request failed:",e),"AbortError"===e.name)throw Error("Request timeout");throw e}finally{setTimeout(()=>{this.requestQueue.delete(r)},100)}})();return this.requestQueue.set(r,i),i}async refreshToken(){try{return(await fetch("".concat(this.baseUrl,"/auth/refresh"),{method:"POST",credentials:"include"})).ok}catch(e){return console.error("Token refresh failed:",e),!1}}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async getCurrentUser(){return this.request("/profile/me")}async getServices(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.append("search",e.search);let s=t.toString();return this.request("/services".concat(s?"?".concat(s):""))}async getService(e){return this.request("/services/".concat(e))}async createService(e){return this.request("/services",{method:"POST",body:JSON.stringify(e)})}async updateService(e,t){return this.request("/services/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteService(e){return this.request("/services/".concat(e),{method:"DELETE"})}async getProjects(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.append("search",e.search);let s=t.toString();return this.request("/projects".concat(s?"?".concat(s):""))}async getProject(e){return this.request("/projects/".concat(e))}async createProject(e){return this.request("/projects",{method:"POST",body:JSON.stringify(e)})}async updateProject(e,t){return this.request("/projects/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteProject(e){return this.request("/projects/".concat(e),{method:"DELETE"})}async uploadImage(e){let t=new FormData;return t.append("image",e),(await fetch("".concat(this.baseUrl,"/upload/image"),{method:"POST",credentials:"include",body:t})).json()}async getContactSubmissions(){return this.request("/contact/submissions")}async submitContactForm(e){return this.request("/contact",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}async updateContactSubmissionStatus(e,t){return this.request("/contact/submissions/".concat(e,"/status"),{method:"PATCH",body:JSON.stringify({status:t}),headers:{"Content-Type":"application/json"}})}async deleteContactSubmission(e){return this.request("/contact/submissions/".concat(e),{method:"DELETE"})}async getBlogPosts(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.append("search",e.search);let s=t.toString();return this.request("/blog".concat(s?"?".concat(s):""))}async getBlogPost(e){return this.request("/blog/".concat(e))}async createBlogPost(e){return this.request("/blog",{method:"POST",body:JSON.stringify(e)})}async updateBlogPost(e,t){return this.request("/blog/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteBlogPost(e){return this.request("/blog/".concat(e),{method:"DELETE"})}async getTeamMembers(){return this.request("/team/admin")}async getTeamMember(e){return this.request("/team/".concat(e))}async createTeamMember(e){return this.request("/team",{method:"POST",body:JSON.stringify(e)})}async updateTeamMember(e,t){return this.request("/team/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteTeamMember(e){return this.request("/team/".concat(e),{method:"DELETE"})}async getTestimonials(e){let t=new URLSearchParams;return(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.status)&&t.append("status",e.status),this.request("/testimonials/admin?".concat(t))}async getPublicTestimonials(e){let t=new URLSearchParams;return(null==e?void 0:e.featured)!==void 0&&t.append("featured",e.featured.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),this.request("/testimonials?".concat(t))}async getTestimonial(e){return this.request("/testimonials/".concat(e))}async createTestimonial(e){return this.request("/testimonials",{method:"POST",body:JSON.stringify(e)})}async updateTestimonial(e,t){return this.request("/testimonials/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteTestimonial(e){return this.request("/testimonials/".concat(e),{method:"DELETE"})}async toggleTestimonialStatus(e){return this.request("/testimonials/".concat(e,"/toggle-status"),{method:"PATCH"})}async toggleTestimonialFeatured(e){return this.request("/testimonials/".concat(e,"/toggle-featured"),{method:"PATCH"})}async getMediaFiles(e){let t=new URLSearchParams;(null==e?void 0:e.category)&&t.append("category",e.category),(null==e?void 0:e.type)&&t.append("type",e.type),(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString());let s=t.toString();return this.request("/media".concat(s?"?".concat(s):""))}async uploadMedia(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general",s=new FormData;for(let t=0;t<e.length;t++)s.append("files",e[t]);return s.append("category",t),this.request("/media/upload",{method:"POST",body:s})}async deleteMedia(e,t){return this.request("/media/".concat(e,"/").concat(t),{method:"DELETE"})}async getMediaCategories(){return this.request("/media/categories")}async getSettings(){return this.request("/settings")}async updateSettings(e){return this.request("/settings",{method:"PUT",body:JSON.stringify({settings:e})})}async getSetting(e){return this.request("/settings/".concat(e))}async deleteSetting(e){return this.request("/settings/".concat(e),{method:"DELETE"})}async initializeDefaultSettings(){return this.request("/settings/initialize",{method:"POST"})}async updateProfile(e){return this.request("/profile/me",{method:"PUT",body:JSON.stringify(e)})}async changePassword(e){return this.request("/profile/change-password",{method:"PUT",body:JSON.stringify(e)})}async getNotifications(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.unread)!==void 0&&t.append("unread",e.unread.toString());let s=t.toString();return this.request("/notifications".concat(s?"?".concat(s):""))}async markNotificationAsRead(e){return this.request("/notifications/".concat(e,"/read"),{method:"PATCH"})}async markAllNotificationsAsRead(){return this.request("/notifications/mark-all-read",{method:"PATCH"})}async deleteNotification(e){return this.request("/notifications/".concat(e),{method:"DELETE"})}async createNotification(e){return this.request("/notifications",{method:"POST",body:JSON.stringify(e)})}async getHeroSlides(){return this.request("/hero-slides/admin")}async getHeroSlidesAnalytics(){return this.request("/hero-slides/analytics/summary")}async createHeroSlide(e){return this.request("/hero-slides",{method:"POST",body:JSON.stringify(e)})}async updateHeroSlide(e,t){return this.request("/hero-slides/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async updateHeroSlideStatus(e,t){return this.request("/hero-slides/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:t})})}async reorderHeroSlide(e,t){return this.request("/hero-slides/".concat(e,"/reorder"),{method:"PUT",body:JSON.stringify({displayOrder:t})})}async deleteHeroSlide(e){return this.request("/hero-slides/".concat(e),{method:"DELETE"})}async updateHeroSlideOrder(e){return this.request("/hero-slides/order",{method:"PUT",body:JSON.stringify({slides:e})})}async uploadHeroSlideImage(e){let t=new FormData;return t.append("image",e),this.request("/hero-slides/upload",{method:"POST",body:t})}async createHeroSlideWithFormData(e){return this.request("/hero-slides",{method:"POST",body:e})}async updateHeroSlideWithFormData(e,t){return this.request("/hero-slides/".concat(e),{method:"PUT",body:t})}async getSystemInfo(){return this.request("/system/info",{method:"GET"})}constructor(e="http://localhost:5000/api"){this.requestQueue=new Map,this.csrfToken=null,this.baseUrl=e}}let n=new r;t.Z=n}}]);